# ğŸ¯ æ¶æ§‹æ±ºç­–æŒ‡å—

> **æœ¬æ–‡ä»¶ç”¨æ–¼å¿«é€Ÿå›é¡§é—œéµæŠ€è¡“é¸æ“‡çš„åŸå› **

---

## 1. æœå°‹å·¥å…·é¸æ“‡

### âœ… ç•¶å‰æ–¹æ¡ˆï¼šTavily + DuckDuckGo Text Search

**ç‚ºä»€éº¼ä¸ç”¨ Playwright çˆ¬èŸ²ï¼Ÿ**

| ç¶­åº¦ | Tavily/DDGS | Playwright |
|------|-------------|------------|
| **å›æ‡‰é€Ÿåº¦** | < 1 ç§’ | 3-5 ç§’ï¼ˆå•Ÿå‹•ç€è¦½å™¨ï¼‰ |
| **è¨˜æ†¶é«”éœ€æ±‚** | < 100MB | > 1GB |
| **Cloud Run ç›¸å®¹æ€§** | âœ… å®Œç¾æ”¯æ´ | âŒ ä¸ç›¸å®¹ï¼ˆéœ€è¦ GUI ä¾è³´ï¼‰ |
| **éƒ¨ç½²è¤‡é›œåº¦** | ç°¡å–®ï¼ˆç´” Pythonï¼‰ | è¤‡é›œï¼ˆéœ€è¦ç³»çµ±åº«ï¼‰ |
| **é©ç”¨å ´æ™¯** | è¾¯è«–æ‘˜è¦ï¼ˆ90%ï¼‰ | æ·±åº¦å…§å®¹åˆ†æï¼ˆ10%ï¼‰ |
| **æˆæœ¬** | å…è²»é¡åº¦å……è¶³ | éœ€è¦æ›´å¤§å¯¦ä¾‹ |

**çµè«–**ï¼š
- âœ… **Phase 1-3**ï¼šä½¿ç”¨ Tavily + DDGSï¼ˆé€Ÿåº¦å¿«ã€ç¬¦åˆè¾¯è«–ç¯€å¥ï¼‰
- ğŸ”µ **Phase 4+**ï¼šå¯é¸æ“‡æ€§åŠ å…¥ Playwright ä½œç‚ºç¨ç«‹æœå‹™ï¼ˆæ·±åº¦çˆ¬å–ï¼‰

---

## 2. æ¶æ§‹æ¨¡å¼é¸æ“‡

### æƒ…å¢ƒ Aï¼šå³æ™‚è¾¯è«–ï¼ˆæœ¬å°ˆæ¡ˆ MVPï¼‰

```
ä½¿ç”¨è€…
  â†“
å‰ç«¯ (Cloudflare Pages)
  â†“
å¾Œç«¯ API (Cloud Run - 512MB)
  â”œâ”€ LangGraph (è¾¯è«–é‚è¼¯)
  â”œâ”€ Groq LLM (AI æ¨ç†)
  â””â”€ Tavily/DDGS (æœå°‹å·¥å…·)
```

**å„ªé»**ï¼š
- ğŸš€ éƒ¨ç½²ç°¡å–®ï¼Œä¸€å€‹ Docker å®¹å™¨æå®š
- âš¡ å›æ‡‰é€Ÿåº¦å¿«ï¼ˆ< 1 ç§’é–‹å§‹ä¸²æµï¼‰
- ğŸ’° å®Œå…¨å…è²»ï¼ˆCloud Run å…è²»é¡åº¦ï¼‰
- ğŸ¯ ç¬¦åˆè¾¯è«–ã€Œä½ ä¾†æˆ‘å¾€ã€çš„ç¯€å¥

**é©ç”¨æ–¼**ï¼š
- å±•ç¤º Multi-Agent å”ä½œèƒ½åŠ›
- è­‰æ˜ LangGraph ç‹€æ…‹ç®¡ç†æŠ€èƒ½
- å±•ç¤ºå³æ™‚ä¸²æµæŠ€è¡“

---

### æƒ…å¢ƒ Bï¼šæ·±åº¦ç ”ç©¶ï¼ˆé€²éšæ“´å±•ï¼‰

```
ä½¿ç”¨è€…
  â†“
å‰ç«¯ (Cloudflare Pages)
  â†“
ä¸» API (Cloud Run - 512MB)          â† è¾¯è«–é‚è¼¯
  â†“
çˆ¬èŸ²æœå‹™ (Cloud Functions Gen2 - 2GB) â† Playwright çˆ¬å–
```

**å„ªé»**ï¼š
- ğŸ¯ ç²¾æº–æ§åˆ¶çˆ¬å–é‚è¼¯
- ğŸ›¡ï¸ ä¸»æœå‹™èˆ‡çˆ¬èŸ²éš”é›¢ï¼ˆçˆ¬èŸ²å´©æ½°ä¸å½±éŸ¿è¾¯è«–ï¼‰
- ğŸ“Š å¯è™•ç†å‹•æ…‹ç¶²ç«™ï¼ˆSPAã€ä»˜è²»ç‰†ï¼‰

**ç¼ºé»**ï¼š
- â±ï¸ å›æ‡‰å»¶é²ï¼ˆ3-5 ç§’ï¼‰
- ğŸ”§ æ¶æ§‹è¤‡é›œåº¦å¢åŠ 
- ğŸ’° éœ€è¦é¡å¤–é…ç½®ï¼ˆCloud Functionsï¼‰

**é©ç”¨æ–¼**ï¼š
- åˆ†æç‰¹å®šé•·æ–‡ï¼ˆå­¸è¡“è«–æ–‡ã€ç™½çš®æ›¸ï¼‰
- çˆ¬å– Tavily ç„¡æ³•è¦†è“‹çš„ç‰¹æ®Šç¶²ç«™
- å±•ç¤ºã€Œæ·±åº¦ç ”ç©¶ã€å·®ç•°åŒ–åŠŸèƒ½

---

## 3. ä½•æ™‚ä½¿ç”¨å“ªç¨®æ–¹æ¡ˆï¼Ÿ

### ğŸŸ¢ Phase 1-3ï¼šå°ˆæ³¨æ ¸å¿ƒåŠŸèƒ½

**å„ªå…ˆç´š**ï¼š
1. âœ… å®ŒæˆåŸºç¤ SSE ä¸²æµ
2. âœ… å¯¦ç¾é›™ Agent è¾¯è«–
3. âœ… æ•´åˆ Tavily + DDGS æœå°‹
4. âœ… éƒ¨ç½²åˆ° Cloud Run

**ä¸è¦åš**ï¼š
- âŒ å¼•å…¥ Playwrightï¼ˆæœƒæ‹–ç´¯é€²åº¦ï¼‰
- âŒ éåº¦å„ªåŒ–æœå°‹çµæœï¼ˆTavily å·²ç¶“å¤ å¥½ï¼‰
- âŒ å˜—è©¦è¤‡é›œçš„å¾®æœå‹™æ¶æ§‹

---

### ğŸ”µ Phase 4+ï¼šæ“´å±•é€²éšåŠŸèƒ½

**è€ƒæ…®åŠ å…¥ Playwright çš„æ™‚æ©Ÿ**ï¼š
1. âœ… åŸºç¤è¾¯è«–åŠŸèƒ½å·²ç©©å®šé‹è¡Œ
2. âœ… ä½ éœ€è¦å±•ç¤ºã€Œèˆ‡çœ¾ä¸åŒã€çš„åŠŸèƒ½
3. âœ… ä½¿ç”¨è€…æœ‰æ˜ç¢ºçš„ã€Œæ·±åº¦åˆ†æã€éœ€æ±‚
4. âœ… ä½ æœ‰æ™‚é–“ç¶­è­·å…©å€‹æœå‹™

**å¯¦ä½œå»ºè­°**ï¼š
- å‰µå»ºç¨ç«‹çš„ Cloud Functionï¼ˆä¸è¦å¡åœ¨ä¸» APIï¼‰
- åªåœ¨ä½¿ç”¨è€…å•Ÿç”¨ã€Œæ·±åº¦æ¨¡å¼ã€æ™‚èª¿ç”¨
- è¨­å®šåˆç†çš„è¶…æ™‚èˆ‡éŒ¯èª¤è™•ç†

---

## 4. å¿«é€Ÿæ±ºç­–æµç¨‹åœ–

```
éœ€è¦æœå°‹åŠŸèƒ½ï¼Ÿ
    â†“
   æ˜¯
    â†“
éœ€è¦çˆ¬å–å®Œæ•´ç¶²é å…§å®¹ï¼Ÿ
    â†“
   å¦ â†’ ä½¿ç”¨ Tavily + DDGSï¼ˆPhase 1-3ï¼‰
    â†“
   æ˜¯
    â†“
éœ€è¦è™•ç†å‹•æ…‹ç¶²ç«™ï¼ˆSPAã€JS æ¸²æŸ“ï¼‰ï¼Ÿ
    â†“
   å¦ â†’ ä½¿ç”¨ç°¡å–®çš„ HTTP çˆ¬èŸ²ï¼ˆhttpx + BeautifulSoupï¼‰
    â†“
   æ˜¯ â†’ è€ƒæ…® Playwrightï¼ˆPhase 4+ï¼‰
    â†“
éƒ¨ç½²ç‚ºç¨ç«‹ Cloud Functionï¼ˆä¸è¦å¡åœ¨ä¸» APIï¼‰
```

---

## 5. é—œéµåŸå‰‡

### âœ… DOï¼ˆæ¨è–¦åšæ³•ï¼‰
1. **å…ˆæ±‚æœ‰ï¼Œå†æ±‚å¥½**ï¼šPhase 1-3 å°ˆæ³¨æ ¸å¿ƒåŠŸèƒ½
2. **ä¿æŒè¼•é‡**ï¼šCloud Run 512MB è¶³ä»¥è™•ç† LLM + æœå°‹
3. **åˆ†é›¢é—œæ³¨é»**ï¼šè¤‡é›œåŠŸèƒ½ï¼ˆå¦‚çˆ¬èŸ²ï¼‰ç¨ç«‹éƒ¨ç½²
4. **å„ªé›…é™ç´š**ï¼šæœå°‹å¤±æ•—ä¸æœƒå°è‡´ç³»çµ±å´©æ½°

### âŒ DON'Tï¼ˆé¿å…é™·é˜±ï¼‰
1. **éæ—©å„ªåŒ–**ï¼šä¸è¦åœ¨ Phase 1 å°±å¼•å…¥ Playwright
2. **å¿½ç•¥æˆæœ¬**ï¼šPlaywright éœ€è¦æ›´å¤§çš„è¨˜æ†¶é«”å¯¦ä¾‹
3. **æ··åˆéƒ¨ç½²**ï¼šä¸è¦æŠŠçˆ¬èŸ²å¡åœ¨ä¸» APIï¼ˆæœƒæ‹–ç´¯å•Ÿå‹•é€Ÿåº¦ï¼‰
4. **å¿½ç•¥ UX**ï¼šè¾¯è«–å¡é “ 5 ç§’ç­‰çˆ¬èŸ²ï¼Œä½¿ç”¨è€…æœƒä¸è€ç…©

---

## 6. æˆæœ¬å°æ¯”

### æ–¹æ¡ˆ Aï¼šTavily + DDGSï¼ˆç•¶å‰æ–¹æ¡ˆï¼‰
```
Cloud Run (512MB)ï¼šå…è²»é¡åº¦å…§
Tavily APIï¼š1000 æ¬¡/æœˆå…è²»
DDGSï¼šå®Œå…¨å…è²»

ç¸½æˆæœ¬ï¼š$0/æœˆ
```

### æ–¹æ¡ˆ Bï¼šåŠ å…¥ Playwrightï¼ˆé€²éšæ“´å±•ï¼‰
```
Cloud Run (512MB)ï¼šå…è²»é¡åº¦å…§
Cloud Functions Gen2 (2GB)ï¼šå…è²»é¡åº¦å…§ï¼ˆ200 è¬æ¬¡è«‹æ±‚ï¼‰
Tavily APIï¼š1000 æ¬¡/æœˆå…è²»

ç¸½æˆæœ¬ï¼š$0/æœˆï¼ˆåœ¨å…è²»é¡åº¦å…§ï¼‰
å–®æ¬¡çˆ¬å–å»¶é²ï¼š+3-5 ç§’
```

---

## 7. ç¸½çµ

**ä¸€å¥è©±æ‘˜è¦**ï¼š
> **ç¾éšæ®µä½¿ç”¨ Tavily + DDGS å³å¯æ»¿è¶³ 90% çš„è¾¯è«–éœ€æ±‚ï¼ŒPlaywright ç•™ä½œ Phase 4 çš„ã€Œæ·±åº¦ç ”ç©¶ã€å·®ç•°åŒ–åŠŸèƒ½ã€‚**

**è¨˜ä½**ï¼š
- ğŸ¯ è¾¯è«–é‡é»æ˜¯ã€Œä½ ä¾†æˆ‘å¾€çš„ç¯€å¥ã€ï¼Œä¸æ˜¯ã€Œå®Œæ•´çš„ç¶²é å…§å®¹ã€
- âš¡ é€Ÿåº¦ > å®Œæ•´æ€§ï¼ˆ1 ç§’æ‘˜è¦ > 5 ç§’å…¨æ–‡ï¼‰
- ğŸ’° å…è²» > ä»˜è²»ï¼ˆCloud Run 512MB > 2GBï¼‰
- ğŸš€ ç°¡å–® > è¤‡é›œï¼ˆå–®ä¸€æœå‹™ > å¾®æœå‹™æ¶æ§‹ï¼‰

**é–‹å§‹è¡Œå‹•**ï¼š
1. å¾ Phase 0 é–‹å§‹å»ºç«‹å°ˆæ¡ˆéª¨æ¶
2. Phase 1 é©—è­‰ SSE ä¸²æµ
3. Phase 2 å¯¦ç¾é›™ Agent è¾¯è«–
4. Phase 3 æ•´åˆ Tavily + DDGS
5. Phase 4ï¼ˆé¸åšï¼‰åŠ å…¥ Playwright æ·±åº¦çˆ¬å–

---

---

## 8. æŠ€è¡“ç‰ˆæœ¬æ›´æ–°è¨˜éŒ„

### 2025-12-04ï¼šLangGraph 1.0 æ›´æ–°

**é—œéµè®Šæ›´**ï¼š
- âœ… **LangGraph å‡ç´šè‡³ 1.0**ï¼šå¾ 0.2+ å‡ç´šè‡³ç©©å®šç‰ˆ 1.0
- âœ… **ä¸²æµ API ç°¡åŒ–**ï¼š`astream_events(version="v2")` â†’ `astream(stream_mode="messages")`
- âœ… **å‘å¾Œç›¸å®¹**ï¼šæ ¸å¿ƒ StateGraph API ä¿æŒä¸è®Š

**æ–° API ç¯„ä¾‹**ï¼š
```python
# èˆŠç‰ˆ (0.2+)
async for event in graph.astream_events(state, version="v2"):
    if event["event"] == "on_chat_model_stream":
        node = next((tag.split(":")[-1] for tag in event.get("tags", [])))
        token = event["data"]["chunk"].content

# æ–°ç‰ˆ (1.0)
async for message, metadata in graph.astream(state, stream_mode="messages"):
    if hasattr(message, 'content') and message.content:
        node = metadata["langgraph_node"]
        token = message.content
```

**å„ªé»**ï¼š
- ğŸš€ æ›´ç°¡æ½”çš„ APIï¼Œç„¡éœ€è¤‡é›œçš„äº‹ä»¶éæ¿¾
- ğŸ“¦ metadata çµæ§‹æ›´æ¸…æ™°ï¼Œç›´æ¥è¨ªå• `langgraph_node`
- ğŸ”§ æ”¯æ´å¤šæ¨¡å¼ä¸²æµï¼š`stream_mode=["messages", "updates", "values"]`

**åƒè€ƒè³‡æ–™**ï¼š
- [LangGraph 1.0 Release Notes](https://docs.langchain.com/oss/python/releases/langgraph-v1)
- [Streaming Documentation](https://docs.langchain.com/oss/python/langgraph/streaming)

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-12-04
**æ–‡ä»¶ç‹€æ…‹**ï¼šâœ… å·²æ›´æ–°è‡³ LangGraph 1.0
